<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">  
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" src="../bower_components/paper-fab-menu/paper-fab-menu.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="post-card.html">
<link rel="import" href="profile-card.html">
<link rel="import" href="trending-card.html">
<link rel="import" href="ad-card.html">
<link rel="import" href="sign-in-card.html">
<link rel="import" href="app-globals.html">


<dom-module id="my-view1">
  <template>
    <style include="shared-styles iron-flex iron-flex-alignment">
      :host {
        display: block;
        padding: 2%;
      }
            .vert{
        @apply(--layout-vertical);
      }

      .horizon{
        @apply(--layout-horizontal)
      }
      .flex{
        @apply(--layout-flex);
      }
      .flex3{
        @apply(--layout-flex-3);
      }
      .flex6{
        @apply(--layout-flex-6);
      }

      /**
       * this media query hides the ad-section when the view area is less than 800px but more than 280px
       * @param  (min-width: 280px) and (max-width: 800px)
       * @return hides ad-section
       */
      @media screen and (min-width: 280px) and (max-width: 800px) {
        #ad-section{
          display: none;
        }
      }
    </style>
<!--     <template is="dom-repeat" items={{array}} 
      as=item index-as=index
      filter="isHandler" sort="sortHandler" observe="itemField1 itemField2"> -->
      <app-globals id="globals"></app-globals>
      <div class="layout horizontal wrap">
      <div class="flex3">
        <sign-in-card class="flex"></sign-in-card>
        <profile-card></profile-card>
        <trending-card></trending-card>
      </div>
      <div class="flex6">
      <post-card class=""></post-card>
      <post-card class=""></post-card>
      <post-card class=""></post-card>
      <post-card class=""></post-card>
      </div>
      <div id="ad-section" class="flex3">
        
          <ad-card title="iphone7" price="$599"></ad-card>
          <ad-card title="iphone7" price="$499"></ad-card>
        
      </div>
      </div>
    <!-- </template> -->
    <paper-fab-menu icon="add" position="vertical">
      <paper-fab-menu-item label="Polymer" icon="polymer" ></paper-fab-menu-item>
      <paper-fab-menu-item label="Favorites" icon="star" ></paper-fab-menu-item>
      <paper-fab-menu-item label="Refresh" icon="refresh" ></paper-fab-menu-item>
    </paper-fab-menu>
    <iron-ajax
      id="products_ajax"
      auto
      url="{{url}}/shop/all/products/57d47a09e4b0eca0903e167a"
      handle-as="json"
      content-type="application/json"
      method="GET"
      last-response="{{last}}"
      on-response="response_handler"
      on-error="error_handler"
      debounce-duration="3000"></iron-ajax>
     
    </template>  

  <script>
    Polymer({
      is: 'my-view1',
      properties : {
        url : {
          type : String,
          value : ""
        }
      },
      ready : function(){
        this.url = this.$.globals.baseUrl;
      },
      response_handler : function(){
        var response = this.$.products_ajax.lastResponse;
        console.info(response);
      },
      error_handler : function(){
        var response = this.$.products_ajax.lastResponse;
        console.error(response);
      }
    });
  </script>
</dom-module>
